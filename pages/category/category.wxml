<view class="container">
  <!-- 分类选择 -->
  <view class="card" wx:if="{{!isSearchMode && !isFeaturedMode}}">
    <view class="section-title">商品分类</view>
    <view class="category-selector">
      <picker bindchange="onCategoryChange" value="{{selectedCategoryIndex}}" range="{{categories}}" range-key="name">
        <view class="picker-display">
          <text class="picker-text">{{selectedCategoryName}}</text>
          <text class="picker-arrow">▼</text>
        </view>
      </picker>
    </view>
  </view>

  <!-- 搜索结果显示 -->
  <view class="card" wx:if="{{isSearchMode}}">
    <view class="section-title">搜索结果</view>
    <view class="search-info">
      <text class="search-keyword">关键词: "{{searchKeyword}}"</text>
      <text class="search-count">共找到 {{products.length}} 个商品</text>
    </view>
  </view>

  <!-- 推荐商品显示 -->
  <view class="card" wx:if="{{isFeaturedMode}}">
    <view class="section-title">推荐商品</view>
    <view class="search-info">
      <text class="search-keyword">精选推荐商品</text>
      <text class="search-count">共 {{products.length}} 个推荐商品</text>
    </view>
  </view>

  <!-- 商品展示 -->
  <view class="card" wx:if="{{products.length > 0}}">
    <view class="section-title">商品列表</view>
    <view class="product-grid">
      <view class="product-item" wx:for="{{products}}" wx:key="id" bindtap="onProductTap" data-id="{{item.id}}">
        <image class="product-image" src="{{item.mainImage}}" mode="aspectFill"></image>
        <view class="product-info">
          <text class="product-name">{{item.name}}</text>
          <text class="product-price">¥{{item.price}}</text>
          <text class="product-stock">库存: {{item.stock}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="card" wx:elif="{{!loading && products.length === 0}}">
    <view class="empty-state">
      <text class="empty-text">该分类下暂无商品</text>
    </view>
  </view>

  <!-- 加载状态 -->
  <view class="card" wx:if="{{loading}}">
    <view class="loading-state">
      <text class="loading-text">加载中...</text>
    </view>
  </view>

  <!-- 快捷入口 -->
  <view class="card">
    <view class="section-title">快捷入口</view>
    <button class="btn-primary" bindtap="goProductList">查看所有商品</button>
  </view>
</view>


